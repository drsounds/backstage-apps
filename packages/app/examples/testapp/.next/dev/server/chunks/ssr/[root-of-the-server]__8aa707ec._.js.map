{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///www/docs/backstage/packages/stitch-app-bridge/src/index.ts"],"sourcesContent":["export class StitchAppBridge {\n    private listeners: { [key: string]: ((data: any) => void)[] } = {};\n\n    constructor() {\n        if (typeof window !== 'undefined') {\n            window.addEventListener('message', this.handleMessage.bind(this));\n        }\n    }\n\n    private handleMessage(event: MessageEvent) {\n        const { action, ...data } = event.data;\n        if (action && this.listeners[action]) {\n            this.listeners[action].forEach(callback => callback(data));\n        }\n    }\n\n    public on(action: string, callback: (data: any) => void) {\n        if (!this.listeners[action]) {\n            this.listeners[action] = [];\n        }\n        this.listeners[action].push(callback);\n    }\n\n    public off(action: string, callback: (data: any) => void) {\n        if (this.listeners[action]) {\n            this.listeners[action] = this.listeners[action].filter(cb => cb !== callback);\n        }\n    }\n\n    public navigate(path: string) {\n        this.postMessage('navigate', { path });\n    }\n\n    public ready() {\n        this.postMessage('load', { value: 120 });\n    }\n\n    private postMessage(action: string, data: any = {}) {\n        if (window.parent) {\n            window.parent.postMessage({ action, ...data }, '*');\n        }\n    }\n}\n\nexport const stitchAppBridge = new StitchAppBridge();\n"],"names":[],"mappings":";;;;;;AAAO,MAAM;IACD,YAAwD,CAAC,EAAE;IAEnE,aAAc;QACV;;IAGJ;IAEQ,cAAc,KAAmB,EAAE;QACvC,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,GAAG,MAAM,IAAI;QACtC,IAAI,UAAU,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE;YAClC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,OAAO,CAAC,CAAA,WAAY,SAAS;QACxD;IACJ;IAEO,GAAG,MAAc,EAAE,QAA6B,EAAE;QACrD,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE;YACzB,IAAI,CAAC,SAAS,CAAC,OAAO,GAAG,EAAE;QAC/B;QACA,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC;IAChC;IAEO,IAAI,MAAc,EAAE,QAA6B,EAAE;QACtD,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE;YACxB,IAAI,CAAC,SAAS,CAAC,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,MAAM,CAAC,CAAA,KAAM,OAAO;QACxE;IACJ;IAEO,SAAS,IAAY,EAAE;QAC1B,IAAI,CAAC,WAAW,CAAC,YAAY;YAAE;QAAK;IACxC;IAEO,QAAQ;QACX,IAAI,CAAC,WAAW,CAAC,QAAQ;YAAE,OAAO;QAAI;IAC1C;IAEQ,YAAY,MAAc,EAAE,OAAY,CAAC,CAAC,EAAE;QAChD,IAAI,OAAO,MAAM,EAAE;YACf,OAAO,MAAM,CAAC,WAAW,CAAC;gBAAE;gBAAQ,GAAG,IAAI;YAAC,GAAG;QACnD;IACJ;AACJ;AAEO,MAAM,kBAAkB,IAAI"}},
    {"offset": {"line": 105, "column": 0}, "map": {"version":3,"sources":["file:///www/docs/backstage/packages/app/examples/testapp/pages/_app.js"],"sourcesContent":["import { useEffect } from 'react';\nimport { useRouter } from 'next/router';\nimport { stitchAppBridge } from 'backstage-stitch-app-bridge';\n\nfunction MyApp({ Component, pageProps }) {\n    const router = useRouter();\n\n    useEffect(() => {\n        // Notify parent about navigation\n        const handleRouteChange = (url) => {\n            // Remove the leading slash as the bridge might expect relative or we handle it\n            // Actually, let's send the full path and let parent decide\n            stitchAppBridge.navigate(url);\n        };\n\n        router.events.on('routeChangeComplete', handleRouteChange);\n\n        // Listen for params from parent\n        stitchAppBridge.on('params', (data) => {\n            if (data.params) {\n                // Check if we need to navigate\n                // This is tricky because params might map to a route\n                // For now, let's assume params[0] is the sub-path\n                // e.g. /app/testapp/foo -> params=['foo'] -> /foo\n                const newPath = '/' + (data.params.join('/') || '');\n                if (router.asPath !== newPath) {\n                    router.replace(newPath);\n                }\n            }\n        });\n\n        // Notify ready\n        stitchAppBridge.ready();\n\n        return () => {\n            router.events.off('routeChangeComplete', handleRouteChange);\n        };\n    }, []);\n\n    return <Component {...pageProps} />;\n}\n\nexport default MyApp;\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE;IACnC,MAAM,SAAS,IAAA,8KAAS;IAExB,IAAA,gHAAS,EAAC;QACN,iCAAiC;QACjC,MAAM,oBAAoB,CAAC;YACvB,+EAA+E;YAC/E,2DAA2D;YAC3D,+JAAe,CAAC,QAAQ,CAAC;QAC7B;QAEA,OAAO,MAAM,CAAC,EAAE,CAAC,uBAAuB;QAExC,gCAAgC;QAChC,+JAAe,CAAC,EAAE,CAAC,UAAU,CAAC;YAC1B,IAAI,KAAK,MAAM,EAAE;gBACb,+BAA+B;gBAC/B,qDAAqD;gBACrD,kDAAkD;gBAClD,kDAAkD;gBAClD,MAAM,UAAU,MAAM,CAAC,KAAK,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE;gBAClD,IAAI,OAAO,MAAM,KAAK,SAAS;oBAC3B,OAAO,OAAO,CAAC;gBACnB;YACJ;QACJ;QAEA,eAAe;QACf,+JAAe,CAAC,KAAK;QAErB,OAAO;YACH,OAAO,MAAM,CAAC,GAAG,CAAC,uBAAuB;QAC7C;IACJ,GAAG,EAAE;IAEL,qBAAO,qKAAC;QAAW,GAAG,SAAS;;;;;;AACnC;uCAEe"}}]
}